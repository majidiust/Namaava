<!DOCTYPE html>
<html class="no-js">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>سمینار</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/layout-default-latest.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-responsive.css">
    <script type="text/javascript" src="js/modernizer-2.6.2.min.js"></script>

    <link href="video-js/video-js.css" rel="stylesheet">
    <script src="video-js/video.js"></script>
    <script>
        videojs.options.flash.swf = "video-js/video-js.swf"
    </script>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>


    <![endif]-->
    <style>
        #Smodal {
            display: block; /* ensures it’s invisible until it’s called */
            position: fixed; /* makes the div go into a position that’s absolute to the browser viewing area */
            left: 0%; /* makes the div span all the way across the viewing area */
            top: 0%; /* makes the div span all the way across the viewing area */
            background-color: black;
            -moz-opacity: 1.001; /* makes the div transparent, so you have a cool overlay effect */
            opacity: 1.001;
            width: 99999px;
            height: 999999px;
            z-index: 90; /* makes the div the second most top layer, so it’ll lay on top of everything else EXCEPT for divs with a higher z-index (meaning the #overlay ruleset) */
        }

        .contentSelector {
            background: #cedce7; /* Old browsers */
            background: -moz-linear-gradient(top, #cedce7 0%, #596a72 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #cedce7), color-stop(100%, #596a72)); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top, #cedce7 0%, #596a72 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top, #cedce7 0%, #596a72 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top, #cedce7 0%, #596a72 100%); /* IE10+ */
            background: linear-gradient(to bottom, #cedce7 0%, #596a72 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#cedce7', endColorstr='#596a72', GradientType=0);
            box-sizing: content-box;
            -webkit-box-shadow: 2px 2px 14px 0px rgba(50, 50, 50, 0.94);
            -moz-box-shadow: 2px 2px 14px 0px rgba(50, 50, 50, 0.94);
            box-shadow: 2px 2px 14px 0px rgba(50, 50, 50, 0.94);
            padding: 10px;
            border-radius: 10px;
            -moz-border-radius: 10px;
            -webkit-border-radius: 10px;
            margin: 0 auto;
            margin-bottom: 10px;

            cursor: pointer;
        }

        .contentSelector:hover {

            -webkit-box-shadow: 2px 2px 30px 0px rgba(50, 50, 50, 0.94);
            -moz-box-shadow: 2px 2px 30px 0px rgba(50, 50, 50, 0.94);
            box-shadow: 2px 2px 30px 0px rgba(50, 50, 50, 0.94);
        }

        #MessageBoxCSS {
            position: fixed;
            z-index: 100;
            top: 50%;
            left: 50%;
            margin: -100px 0 0 -100px;
            width: 400px;
            height: 50px;
            -moz-box-shadow: 0px 0px 50px 10px rgba(119, 119, 119, 0.6);
            -webkit-box-shadow: 0px 0px 50px 10px rgba(119, 119, 119, 0.6);
            box-shadow: 0px 0px 50px 10px rgba(119, 119, 119, 0.6);
            border-radius: 10px;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            font-size: 25px;
            -moz-opacity: 1.0; /* makes the div transparent, so you have a cool overlay effect */
            opacity: 1.0;
        }
    </style>
</head>
<body id="body">
<div id="CustomMessageBox">
    <div id="Smodal">
    </div>
    <div class="alert alert-danger" id="MessageBoxCSS">
        <center>
            در حال دریافت اطلاعات سمینار، لطفا منتظر بمانید.
        </center>
    </div>
</div>


<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar">
                        </span>
            </button>
            <a class="brand" href="#">نماآوای زندگی</a>

            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li style="display: none;">
                        <a href="#" class="file-down" data-toggle="modal" data-target="#myModal">
                            <i class="icon-file icon-white">
                                دانلود فایل ها
                            </i>
                        </a>
                    </li>
                    <li><a id="webinarInfoBtn" href="#" class="wInfo" data-toggle="modal" data-target="#webinarInfo">
                        <i class="icon-info-sign icon-white"></i>سمینار</a></li>
                    <li style="display: none;"><a href="#" class="file-down" data-toggle="modal"
                                                  data-target="#ListOfPresent"><i
                            class="icon-file icon-bell"></i>لیست حاضران</a></li>
                    <li style="display: none;"><a id="sliderClose" class="ui-layout-button-toggle-west" href="#"
                                                  layoutname="inner">
                        <i class="icon-arrow-up icon-white"></i>اسلایدر</a></li>
                    <li><a href="http://www.iwebinar.ir:6060/Panels/blank.html"><i class="icon-home icon-white">
                    </i>بازگشت</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- navbar-inner end -->
</div>
<div id="layoutContainer" style="height: 100%;width: 100%; dispaly: none;">
    <!-- Begin of West -->
    <div id="layoutWest">
        <div id="SlideHere" class="slideWrapper">
            <div class="slideTop">
                <div id="pptSelect" class="btn-group dropdown">
                    <button class="btn btn-mini">
                        انتخاب اسلاید
                    </button>
                    <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown">
                        <span class="caret"></span>
                    </button>
                </div>
            </div>
            <div id="svPlayerId" class="slidePlayer clr">
                <div class="dispaly">
                    <div id="exposure">
                    </div>
                    <div class="thumbsPanel">
                        <ul id="images" class="exposureThumbs">
                        </ul>
                        <div class="clear">
                        </div>
                    </div>
                </div>
                <div class="toolbar">
                    <div class="slideNavActions">
                        <button id="syncWithT" class="btn btn-success btn-mini" title="همزمانی با استاد"
                                type="button">
                            <i class="icon-refresh"></i>
                        </button>
                        <label class="goToSlideLabel" title="شماره اسلاید">
                            <input type="text" name="gotoSlide" value="1">
                            <span title="تعداد کل اسلایدها"></span>
                        </label>
                        <button id="slideshow" class="btn btn-success btn-mini" title="اسلاید شو" type="button">
                            <i class="icon-film"></i>
                        </button>
                    </div>
                    <div class="time" title="زمان باقی مانده">
                        <span></span><i class="icon-time"></i>
                    </div>
                    <div class="slideNav">
                        <a href="#btnLast" rel="nofollow" title="اولین اسلاید" class="btnLast"></a><a href="#btnNext"
                                                                                                      rel="nofollow"
                                                                                                      title="قبلی"
                                                                                                      class="btnNext"></a><a
                            href="#btnPrevious" rel="nofollow"
                            title="بعدی" class="btnPrevious"></a><a href="#btnFirst" rel="nofollow" title="آخرین اسلاید"
                                                                    class="btnFirst"></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Of West -->
    <!-- Begin Of Center -->
    <div id="layoutCenter">
        <div id="layoutCenter_east" style="
        padding: 10px;
       background: rgb(247,251,252); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(247,251,252,1) 0%, rgba(217,237,242,1) 40%, rgba(173,217,228,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(247,251,252,1)), color-stop(40%,rgba(217,237,242,1)), color-stop(100%,rgba(173,217,228,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(247,251,252,1) 0%,rgba(217,237,242,1) 40%,rgba(173,217,228,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(247,251,252,1) 0%,rgba(217,237,242,1) 40%,rgba(173,217,228,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(247,251,252,1) 0%,rgba(217,237,242,1) 40%,rgba(173,217,228,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(247,251,252,1) 0%,rgba(217,237,242,1) 40%,rgba(173,217,228,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f7fbfc', endColorstr='#add9e4',GradientType=0 ); /* IE6-9 */
">

        </div>
        <div id="layoutCenter_center" style="background: rgb(181,189,200); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(181,189,200,1) 0%, rgba(130,140,149,1) 36%, rgba(40,52,59,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(181,189,200,1)), color-stop(36%,rgba(130,140,149,1)), color-stop(100%,rgba(40,52,59,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b5bdc8', endColorstr='#28343b',GradientType=0 ); /* IE6-9 */
padding: 20px;
">

            <!-- Begin Of Video player -->
            <video id="example_video_1" class="video-js vjs-default-skin"
                   controls preload="auto" width="80%" height="80%" autoplay="true"
                   data-setup='{"example_option":true}'
                   style="margin:0 auto;-webkit-box-shadow: 0px 0px 26px 0px rgba(50, 50, 50, 0.94);
-moz-box-shadow:    0px 0px 26px 0px rgba(50, 50, 50, 0.94);
box-shadow:         0px 0px 26px 0px rgba(50, 50, 50, 0.94);
                    border-radius: 8px;
                    -webkit-border-radius: 8px;
                    -moz-border-radius: 8px;
                    ">
                <source src="http://94.232.174.206:7700/Namaava/3059/1043.webm" type='video/mp4'/>
                <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web
                    browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5
                        video</a></p>
            </video>
            <!-- end of video player -->
        </div>
    </div>
    <!-- End Of Center -->
    <div id="layoutEast">
        <div id="chatSlider" style="dispaly: none; height: 70%; margin-bottom: 5px;">
            <div class="viewport" id="chatList" style="dispaly: none; overflow: scroll; height: 100%;">
                <ul class="overview">
                </ul>
            </div>
        </div>
        <div class="sendChat" style="height: 25%;">
            <form class="navbar-form pull-left">
                <textarea rows="3" cols="5"></textarea>

                <div class="btn-group">
                    <button id="toTeacher" class="btn">
                        ارسال به استاد
                    </button>
                    <button id="toTechnical" class="btn">
                        ارسال به پشتیبان
                    </button>
                </div>
                <button id="ShowAllChats" class="btn btn-success btn-mini" title="نمایش همه چت ها"
                        type="button">
                    <i class="icon-refresh"></i>
                </button>
            </form>
        </div>
    </div>
</div>
<div id="webinarInfo" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
        ×
    </button>
    <h3 class="myModalLabel">
        اطلاعات سمینار</h3>
</div>
<div class="modal-body">
    <div class="tabbable tabs-right">
        <ul class="nav nav-tabs" id="infoTab">
            <li class="active"><a href="#tab1">درباره سمینار</a></li>
            <li><a href="#tab2">درباره ارائه دهنده</a></li>
            <li><a href="#tab3">موضوعات</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active " id="tab1">
                <div class="webinarInfo">
                    <img class="img-polaroid" width="90" height="90" src="img/webinarIcon.png" alt="Small">
                    <h4>
                        عنوان سمینار <span id="seminarTopic"></span>
                    </h4>

                    <p id="seminarExplain">
                        جديدترين تکنولوژي مايکروسافت بر پايه ASP.NET است که تمام مزاياي متد MVC را جهت توليد
                        نرم‌افزارهاي بهتر در اختيار برنامه‌نويسان قرار مي‌دهد. بهبود کيفيت کد نوشته‌شده
                        با Unit Testها، عدم نياز به کنترلرهاي مرسوم و دلايل ديگر باعث محبوبيت اين تکنولوژي
                        شده‌است.
                    </p>
                </div>
            </div>
            <div class="tab-pane " id="tab2">
                <div class="webinarInfo">
                    <img class="img-circle" width="90" height="90" src="img/avatar.jpg" alt="Small">
                    <h4>
                        درباره ارائه دهنده <span></span>
                    </h4>

                    <p id="seminarPresentor">
                        جديدترين تکنولوژي مايکروسافت بر پايه ASP.NET است که تمام مزاياي متد MVC را جهت توليد
                        نرم‌افزارهاي بهتر در اختيار برنامه‌نويسان قرار مي‌دهد. بهبود کيفيت کد نوشته‌شده
                        با Unit Testها، عدم نياز به کنترلرهاي مرسوم و دلايل ديگر باعث محبوبيت اين تکنولوژي
                        شده‌است.</p>
                </div>
            </div>
            <div class="tab-pane " id="tab3">
                <div class="webinarInfo">
                    <h4>
                        <span> دلایل شرکت</span>
                    </h4>

                    <div id="seminarWhy">

                        </duv>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">
            بازگشت
        </button>
    </div>
</div>
<div id="myModal" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            ×
        </button>
        <h3 class="myModalLabel">
            دانلود فایلهای سمینار</h3>
    </div>
    <div class="modal-body">
        <table class="table table-striped">
            <thead>
            <tr>
                <td>
                    ردیف
                </td>
                <td>
                    نام فایل
                </td>
                <td>
                    حجم
                </td>
                <td>
                    نوع
                </td>
                <td>
                    دانلود
                </td>
            </tr>
            </thead>
        </table>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">
            بازگشت
        </button>
    </div>
</div>
<div id="ListOfPresent" class="modal hide fade" role="dialog" aria-labelledby="myModalLabe4"
     aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            ×
        </button>
        <h3 class="myModalLabel">
            لیست حاضرین</h3>
    </div>
    <div class="modal-body">
        <table class="table table-striped">
            <thead>
            <tr>
                <td>
                    نام
                </td>
                <td>
                    نام خانوادگی
                </td>
                <td>
                    نام کاربری
                </td>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">
            بازگشت
        </button>
    </div>
</div>

<script type="text/javascript" src="js/jquery-1.7.1.js"></script>
<script type="text/javascript" src="js/underscore-min.js"></script>
<script type="text/javascript" src="js/jquery-ui-latest.js"></script>
<script type="text/javascript" src="js/jquery.layout-latest.js"></script>
<script type="text/javascript" src="js/jquery.exposure.min.js"></script>
<script type="text/javascript" src="js/jCarousel.min.js"></script>
<script type="text/javascript" src="js/jquery.tinycarousel.js"></script>
<script type="text/javascript" src="js/jquery.tinyscrollbar.min.js"></script>
<script type="text/javascript" src="js/jPlayey/jquery.jplayer.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>

<script type="text/javascript">
    var ServerURL = "/ServerSide/";
    $(window).load(function () {
        $("#CustomMessageBox").fadeOut(2000);
    });
    var videoObj;
    var Room = {};
    var videos = {};
    var seminarInfo;
    $(document).ready(function () {

        var roomLayout = $("#layoutContainer").layout({
            west__paneSelector: '#layoutWest',
            east__paneSelector: '#layoutEast',
            center__paneSelector: '#layoutCenter',
            west__initClosed: true,
            east__initClosed: true,
            autoBindCustomButtons: true,
            west__size: .46,
            west__maxSize: .50,
            west__minSize: .46,
            east__size: .24,
            east__maxSize: .35,
            east__minSize: .24,
            center__size: .40,
            center__maxSize: .50,
            center__minSize: .21,
            livePaneResizing: true
        });

        var centerLayout = $("#layoutCenter").layout({
            east__paneSelector: '#layoutCenter_east',
            center__paneSelector: '#layoutCenter_center',
            west__initClosed: true,
            east__initClosed: false,
            autoBindCustomButtons: true,
            west__size: .25,
            west__maxSize: .30,
            west__minSize: .25,
            east__size: .24,
            east__maxSize: .35,
            east__minSize: .24,
            center__size: .40,
            center__maxSize: .50,
            center__minSize: .21,
            livePaneResizing: true
        });

        videoObj = videojs("example_video_1", {}, function () {
            // Player (this) is initialized and ready.
        });

        getWebinarId();

    });

    function loadVideo(id) {
        if (id == '1') {
            videoObj.src([
                { type: "video/mp4", src: "http://94.232.174.206:7700/Namaava/3054/1037.webm" }
            ]);
        }
    }

    function getWebinarId() {
        var qs = getQueryStrings();
        Room.webinarId = qs["WebinarID"];
        alert(Room.webinarId);
        if (Room.webinarId == undefined) {
            window.location = "http://www.iwebinar.:6060";
        } else {
            getWebinarInformation();
        }
    }

    function isLoggedInToServer() {
        $.ajax({
            type: 'GET',
            url: ServerURL + "Account/IsLoggedIn",
            dataType: 'json',
            success: function (result) {
                if (result.Status == true) {
                    Room.userName = result.user;
                    //alert(Room.userName);
                }
                else {
                    window.location = "http://www.iwebinar.ir:6060";
                }
            },
            async: false
        });
    }

    function getQueryStrings() {
        var assoc = {};
        var decode = function (s) {
            return decodeURIComponent(s.replace(/\+/g, " "));
        };
        var queryString = location.search.substring(1);
        var keyValues = queryString.split('&');
        for (var i in keyValues) {
            var key = keyValues[i].split('=');
            if (key.length > 1) {
                assoc[decode(key[0])] = decode(key[1]);
            }
        }
        return assoc;
    }

    function getWebinarInformation() {
        $.ajax({
            type: 'GET',
            url: ServerURL + 'Session/SessionSearchByID',
            datatype: 'json',
            data: { sessionId: Room.webinarId },
            success: function (result) {
                seminarInfo = result;
                $("#seminarExplain").html(result.Result.description);
                $("#seminarTopic").html(result.Result.name);
                $("#seminarPresentor").html(result.Result.presentor);
                $("#seminarWhy").html(result.Result.why);
                GetListOfVideos(Room.webinarId);
            },
            error: function () {

            }
        });
        console.log("Try To Get List Of Video Files");
    }

    function GetListOfVideos(sessionId) {
        $.ajax({
            type: 'GET',
            url: ServerURL + "Account/GetListOfVideos",
            dataType: 'json',
            data: { sessionId: Room.webinarId },
            success: function (result) {
                console.log(result.Message);
                if (result.Status == true) {
                    console.log(result.Message);

                    for (var i = 0; i < result.Result.length; i++) {
                        var url = "http://94.232.174.206:7700/Namaava/" + Room.webinarId + "/" + result.Result[i].fileId + ".webm";
                        videos[i] = url;
                        var f = GenerateVideoTag(i, result.Result[i].fileUrl);
                        console.log(GenerateVideoTag(i, result.Result[i].fileUrl));
                        $("#layoutCenter_east").html($("#layoutCenter_east").html() + f);
                    }
                    console.log(videos);
                }
                else {
                    $("#SessionVideo").html("");
                }
            },
            async: false
        });
    }

    function SwitchVideo(url){
        console.log(url);
    }

    function GenerateVideoTag(id, name) {
        var tag = '<div id="' + id + '" class="contentSelector" onclick="SwitchVideo(' + '"' + id +  '"' + ');">';
        tag += '<table style="width: 100%;">';
        tag += '<tr>';
        tag += '<td style="padding:5px; height:100px;width:60%;font-family: tahoma, verdana, sans-serif; font-size: 12px;text-align: right;direction: rtl;">' + name;
        tag += '</td>';
        tag += '<td>';
        tag += '<img id="seminar_pic" src="../../images/default.png"';
        tag += 'alt=""';
        tag += 'style="width:80%;';
        tag += 'padding:';
        tag += '10px;background: #eeeeee;';
        tag += 'border: 0px solid #bbbbbb;';
        tag += 'border-radius: 10px;';
        tag += '-moz-border-radius: 10px;';
        tag += '-webkit-border-radius: 10px;vertical-align: middle;-webkit-box-shadow: 8px 5px 15px 0px rgba(50, 50, 50, 0.75);';
        tag += '-moz-box-shadow:    8px 5px 15px 0px rgba(50, 50, 50, 0.75);';
        tag += 'box-shadow:         8px 5px 15px 0px rgba(50, 50, 50, 0.75);">';
        tag += '</td>';
        tag += '</tr>';
        tag += '</table>';
        tag += '</div>';
        return tag;
    }
</script>
</body>
</html>
